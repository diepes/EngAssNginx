#cloud-config
# deployed as part of terraform deployment.
hostname: ${HOSTNAME}
swap:
  filename: /swapfile01
  size: "auto"
  maxsize: 2097152000 # 2GB
packages:
  - docker
  - git
  - uvicorn
  #- vim
  #- zsh
  #- mc
  #- awscli
package_update: true
package_upgrade: true
package_reboot_if_required: true
runcmd:
  - [ git, clone, --branch, test, "https://github.com/diepes/EngAssNginx.git", /opt/gitrepo, ]
  - [ python3, -m, pip, install, "fastapi[all]", "fastapi-utils", ]
  - [ /opt/gitrepo/scripts/cloud-config-initial-setup.sh, ]
#groups:
# write_files:

final_message: "The system is finally up, after $UPTIME seconds"
